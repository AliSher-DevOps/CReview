{% extends 'base.html' %}
{% block title %}  <title>{{ title }}</title> {% endblock %}
{% block content %}
    <div class="container mt-5 pt-4">
        <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-8  p-1 m-1">
                <h5>Profile</h5>
                <small class="text-success">
                    Change your name, email or password.</small><br>
                {% for message in messages %}
                    <span class="text-danger pt-2">
        {{ message }}
        </span>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="container mt-2 ">

        <div class="row">
            <div class="col-sm-2">

            </div>
            <div class="col-sm-8 bg-white p-2 m-1">
                <div class="p-1">
                    <h6>
                        Account Details
                    </h6>
                </div>
                <div class="border-bottom p-2">
                    <Span class="mr-2"> Name</Span> <span class="ml-4 text-primary">{{ username }}</span>
                </div>
                <div div class="border-bottom p-2">
                    <Span class="mr-2">Email </Span> <span class="ml-4 text-primary">{{ email }}</span>
                </div>
                <div div class="border-bottom p-2">
                    <Span class="mr-2">Password</Span> <span class="ml-2 text-danger">*********************</span>
                </div>
                <div div class="border-bottom p-2">

                    <button type="button" class="btn btn-primary btn-sm m-1" data-toggle="modal" data-target="#myModal">
                        Edit Account Detail
                    </button>

                    <button type="button" class="btn btn-warning btn-sm m-1 " data-toggle="modal"
                            data-target="#myModal2">
                        Change password
                    </button>

                    <button class="btn btn-success btn-lg float-right btn-sm m-1" type="submit" data-toggle="modal"
                            data-target="#myModal3">+
                    </button>
                    <small class="float-right p-2  text-success">Add App Details</small>
                </div>

            </div>

        </div>

        <!-- The Modal -->
        <div class="modal" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form action="updateProfile " method="post">
                        <!-- Modal Header -->
                        <div class="modal-header ">
                            <h6 class="modal-title">Edit Account Details</h6>


                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body  p-4">

                            <div class="form-group">
                                <label for="username">Name</label>
                                <input type="text" class="form-control bg-light border-0" id="name" name="username"
                                       value={{ user.username }}>
                            </div>

                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-success btn-sm">Save Account Details</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="modal" id="myModal2">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form action="changePassword" method="post" id="form">
                        <!-- Modal Header -->
                        <div class="modal-header ">
                            <h6 class="modal-title">Change My Password</h6>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body  p-4">

                            <div class="form-group">
                                <label for="name">New Password</label>
                                <input type="password" class="form-control bg-light border-0" id="password"
                                       name="newPassword" placeholder="Enter your New password" minlength="6" required>
                            </div>
                            <div class="form-group">
                                <label for="inputEmail1">Confirm Password</label>
                                <input type="password" class="form-control bg-light border-0" id="confirmPassword"
                                       name="confPassword" placeholder="Re-enter password" minlength="6" required>
                                <small id='message' class="text-danger"></small><br>
                            </div>

                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-success btn-sm">update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- The Modal -->
        <div class="modal" id="myModal3">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form action="addApps" method="post">
                        <!-- Modal Header -->
                        <div class="modal-header ">
                            <h6 class="modal-title">Add App Details</h6>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body  p-4">
                            <div class="form-group">
                                <label for="appID">App ID</label>
                                <input type="text" class="form-control bg-light border-0" id="appID" name="app_ID"
                                       placeholder="com.imangi.templerun2" required>
                            </div>
                            <small class="text-secondary">
                                Hint : https://play.google.com/store/apps/details?id=<p class="text-danger">
                                com.imangi.templerun2
                            </p>
                            </small>

                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-success btn-sm">Add App</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-2 ">

        <div class="row">
            <div class="col-sm-2">

            </div>
            <div class="col-sm-8">
                <small>Want to delete this account? All your information will be lost and unrecoverable</small><br>
                <a href=" " data-toggle="modal" data-target="#deleteModal" class="text-danger">Delete my account.</a>

            </div>
        </div>
    </div>
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <form action="user_del">

                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteModalLabel">Warning</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to delete this account? Everything will be lost.

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-danger">Confirm</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>

        $("#form").submit(function () {
            if ($("#password").val() != $("#confirmPassword").val()) {
                $("#message").text("Entered Password is not matching!! Try Again");
                return false;
            }
        })

    </script>
{% endblock %}